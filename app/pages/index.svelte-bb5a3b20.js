var t=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(e,n,r)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,o=(t,e)=>{for(var n in e||(e={}))a.call(e,n)&&s(t,n,e[n]);if(r)for(var n of r(e))l.call(e,n)&&s(t,n,e[n]);return t};import{S as c,i,s as f,e as h,t as u,c as p,a as g,g as m,d,b as $,f as b,E as v,h as y,k as w,n as x,v as j,B as k,r as _,u as E,I as O,G as P,j as T,l as B,m as D,o as S,p as R,q as A,w as H,A as I,J as K,H as N,K as q}from"../chunks/vendor-573731bf.js";import{c as z,r as C}from"../chunks/Player-a1b7151e.js";function G(t,e,n){const r=t.slice();return r[2]=e[n],r}function J(t,e,n){const r=t.slice();return r[5]=e[n],r}function L(t,e,n){const r=t.slice();return r[5]=e[n],r}function M(t){var e;let n,r,a=(null!=(e=t[5].label)?e:t[5])+"";return{c(){n=h("th"),r=u(a),this.h()},l(t){n=p(t,"TH",{class:!0});var e=g(n);r=m(e,a),e.forEach(d),this.h()},h(){$(n,"class","svelte-1ifxkxo")},m(t,e){b(t,n,e),v(n,r)},p(t,e){var n;1&e&&a!==(a=(null!=(n=t[5].label)?n:t[5])+"")&&y(r,a)},d(t){t&&d(n)}}}function U(t){let e,n=t[2][t[5]]+"";return{c(){e=u(n)},l(t){e=m(t,n)},m(t,n){b(t,e,n)},p(t,r){3&r&&n!==(n=t[2][t[5]]+"")&&y(e,n)},i:P,o:P,d(t){t&&d(e)}}}function F(t){let e,n,r;const a=[t[5].props(t[2])];var l=t[5].component;function s(t){let e={};for(let n=0;n<a.length;n+=1)e=I(e,a[n]);return{props:e}}return l&&(e=new l(s())),{c(){e&&T(e.$$.fragment),n=B()},l(t){e&&D(e.$$.fragment,t),n=B()},m(t,a){e&&S(e,t,a),b(t,n,a),r=!0},p(t,r){const o=3&r?R(a,[A(t[5].props(t[2]))]):{};if(l!==(l=t[5].component)){if(e){k();const t=e;_(t.$$.fragment,1,0,(()=>{H(t,1)})),E()}l?(e=new l(s()),T(e.$$.fragment),j(e.$$.fragment,1),S(e,n.parentNode,n)):e=null}else l&&e.$set(o)},i(t){r||(e&&j(e.$$.fragment,t),r=!0)},o(t){e&&_(e.$$.fragment,t),r=!1},d(t){t&&d(n),e&&H(e,t)}}}function Q(t){let e,n=t[5].getter(t[2])+"";return{c(){e=u(n)},l(t){e=m(t,n)},m(t,n){b(t,e,n)},p(t,r){3&r&&n!==(n=t[5].getter(t[2])+"")&&y(e,n)},i:P,o:P,d(t){t&&d(e)}}}function V(t){let e,n,r,a,l;const s=[Q,F,U],o=[];function c(t,e){return t[5].getter?0:t[5].component?1:2}return n=c(t),r=o[n]=s[n](t),{c(){e=h("td"),r.c(),this.h()},l(t){e=p(t,"TD",{style:!0});var n=g(e);r.l(n),n.forEach(d),this.h()},h(){$(e,"style",a=t[5].style)},m(t,r){b(t,e,r),o[n].m(e,null),l=!0},p(t,i){let f=n;n=c(t),n===f?o[n].p(t,i):(k(),_(o[f],1,1,(()=>{o[f]=null})),E(),r=o[n],r?r.p(t,i):(r=o[n]=s[n](t),r.c()),j(r,1),r.m(e,null)),(!l||1&i&&a!==(a=t[5].style))&&$(e,"style",a)},i(t){l||(j(r),l=!0)},o(t){_(r),l=!1},d(t){t&&d(e),o[n].d()}}}function W(t){let e,n,r,a=t[0],l=[];for(let o=0;o<a.length;o+=1)l[o]=V(J(t,a,o));const s=t=>_(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("tr");for(let t=0;t<l.length;t+=1)l[t].c();n=w(),this.h()},l(t){e=p(t,"TR",{class:!0});var r=g(e);for(let e=0;e<l.length;e+=1)l[e].l(r);n=x(r),r.forEach(d),this.h()},h(){$(e,"class","svelte-1ifxkxo")},m(t,a){b(t,e,a);for(let n=0;n<l.length;n+=1)l[n].m(e,null);v(e,n),r=!0},p(t,r){if(3&r){let o;for(a=t[0],o=0;o<a.length;o+=1){const s=J(t,a,o);l[o]?(l[o].p(s,r),j(l[o],1)):(l[o]=V(s),l[o].c(),j(l[o],1),l[o].m(e,n))}for(k(),o=a.length;o<l.length;o+=1)s(o);E()}},i(t){if(!r){for(let t=0;t<a.length;t+=1)j(l[t]);r=!0}},o(t){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)_(l[e]);r=!1},d(t){t&&d(e),O(l,t)}}}function X(t){let e,n,r,a,l=t[0],s=[];for(let f=0;f<l.length;f+=1)s[f]=M(L(t,l,f));let o=t[1],c=[];for(let f=0;f<o.length;f+=1)c[f]=W(G(t,o,f));const i=t=>_(c[t],1,1,(()=>{c[t]=null}));return{c(){e=h("table"),n=h("tr");for(let t=0;t<s.length;t+=1)s[t].c();r=w();for(let t=0;t<c.length;t+=1)c[t].c();this.h()},l(t){e=p(t,"TABLE",{class:!0});var a=g(e);n=p(a,"TR",{class:!0});var l=g(n);for(let e=0;e<s.length;e+=1)s[e].l(l);l.forEach(d),r=x(a);for(let e=0;e<c.length;e+=1)c[e].l(a);a.forEach(d),this.h()},h(){$(n,"class","header svelte-1ifxkxo"),$(e,"class","svelte-1ifxkxo")},m(t,l){b(t,e,l),v(e,n);for(let e=0;e<s.length;e+=1)s[e].m(n,null);v(e,r);for(let n=0;n<c.length;n+=1)c[n].m(e,null);a=!0},p(t,[r]){if(1&r){let e;for(l=t[0],e=0;e<l.length;e+=1){const a=L(t,l,e);s[e]?s[e].p(a,r):(s[e]=M(a),s[e].c(),s[e].m(n,null))}for(;e<s.length;e+=1)s[e].d(1);s.length=l.length}if(3&r){let n;for(o=t[1],n=0;n<o.length;n+=1){const a=G(t,o,n);c[n]?(c[n].p(a,r),j(c[n],1)):(c[n]=W(a),c[n].c(),j(c[n],1),c[n].m(e,null))}for(k(),n=o.length;n<c.length;n+=1)i(n);E()}},i(t){if(!a){for(let t=0;t<o.length;t+=1)j(c[t]);a=!0}},o(t){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)_(c[e]);a=!1},d(t){t&&d(e),O(s,t),O(c,t)}}}function Y(t,e,n){let{columns:r}=e,{data:a}=e;return t.$$set=t=>{"columns"in t&&n(0,r=t.columns),"data"in t&&n(1,a=t.data)},[r,a]}class Z extends c{constructor(t){super(),i(this,t,Y,X,f,{columns:0,data:1})}}function tt(t){let e,n,r,a;return{c(){e=h("button"),n=u("play_arrow"),this.h()},l(t){e=p(t,"BUTTON",{class:!0});var r=g(e);n=m(r,"play_arrow"),r.forEach(d),this.h()},h(){$(e,"class","icon")},m(l,s){b(l,e,s),v(e,n),r||(a=K(e,"click",t[2]),r=!0)},p:P,i:P,o:P,d(t){t&&d(e),r=!1,a()}}}function et(t,e,n){let r;N(t,z,(t=>n(1,r=t)));let{track:a}=e;return t.$$set=t=>{"track"in t&&n(0,a=t.track)},[a,r,()=>q(z,r=a,r)]}class nt extends c{constructor(t){super(),i(this,t,et,tt,f,{track:0})}}function rt(t){let e,n;return e=new Z({props:{columns:[{label:"",component:nt,props:lt},"title",{label:"stems",getter:st},{label:"duration",getter:ot,style:"text-align: right;"},{label:"metadata",getter:ct},{label:"tags",getter:it}],data:t[0]}}),{c(){T(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p(t,[n]){const r={};1&n&&(r.data=t[0]),e.$set(r)},i(t){n||(j(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}async function at({fetch:t}){try{const r=await t("https://ipfs.io/api/v0/name/resolve?arg=mm.em32.net");console.log(r);const{Path:a}=await r.json();C.set(a);const l=await t(`https://ipfs.io/api/v0/cat?arg=${a}/metadata.json`);console.log(l);const s=await l.json();return{props:{recordings:(await Promise.all(s.map((async e=>{const n=await t(`https://ipfs.io/api/v0/cat?arg=${a}/${e.path}/metadata.json`);return o({path:e.path},await n.json())})))).flatMap((({title:t,path:r,recordings:a})=>a.map((a=>{return l=o({},a),s={season:t,data_folder:`${r}/${a.data_folder}`},e(l,n(s));var l,s}))))}}}catch(r){console.log("Error happened:",r)}}const lt=t=>({track:t}),st=({tracks:t})=>t.length,ot=({stereo_mix:t})=>{const e=(0|t.media_info.Duration)%60;return`${t.media_info.Duration/60|0}m${e.toString().padStart(2,"0")}s`},ct=({stereo_mix:t})=>`\n      ${t.media_info.Channels}ch\n      ${t.media_info.SamplingRate/1e3}Khz\n      ${t.media_info.BitDepth}bit\n    `,it=({tags:t})=>t.join(", ");function ft(t,e,n){let{recordings:r=[]}=e;return t.$$set=t=>{"recordings"in t&&n(0,r=t.recordings)},[r]}export default class extends c{constructor(t){super(),i(this,t,ft,rt,f,{recordings:0})}}export{at as load};
